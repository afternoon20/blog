[{"content":"ZennのOGP画像のように画像のテンプレートを用意して、そこに動的にブログ記事のタイトルを挿入する方法を解説します。 今回はCloudinaryというサービスを使用し、Hugo、Reactでの実装例も紹介します。\nログイン まずは以下からサインアップ、ログインします。\nhttps://cloudinary.com/\nCloudinaryでの設定手順 Cloud name（クラウド名）の確認 Home \u0026gt; Dashboardのうち、Product Environmentの「Cloud name」がクラウド名になります。\n日本語フォントを有効化するための権限設定 デフォルトのArialが微妙な場合は、Googleフォントなどをアップロードして読み込ませることができます。そのための必須設定です。\nSettings \u0026gt; Upload を開く Uploadから「Add upload preset」ボタンを押す Upload preset nameは任意入力（例：custom_fonts） 左メニューの「Optimize and Delivery」\u0026gt; Delivery typeを「Authenticated」 それ以外は変更しないでsaveを押す Settings \u0026gt; Uploadに戻り、「Manage Defaults」からMedia LibraryのRawを作成したpresetに変更して保存 素材のアップロード 背景画像 Assetからアップロードして画像を選択します。右にメニューが出るのでPublic IDを設定したい値に変更します。（例：ogp_base）\n日本語フォント GoogleフォントからNotoSansJPなどをダウンロードします。その後、画像と同様にAssetから任意のttfファイルをアップロードします。PublicIDには「NotoSansJP-Bold.ttf」など拡張子込みの名前に変更します。\n実装コード例 Hugo React const getOgpUrl = (title) =\u0026gt; { const cloudName = \u0026#34;your_cloud_name\u0026#34;; const baseId = \u0026#34;ogp_base\u0026#34;; const encodedTitle = encodeURIComponent(title).replace(/%/g, \u0026#39;%25\u0026#39;); const params = [ `l_text:NotoSansJP-Bold.ttf_60_bold:${encodedTitle}`, \u0026#39;w_850\u0026#39;, \u0026#39;co_rgb:000000\u0026#39;, \u0026#39;c_fit\u0026#39;, \u0026#39;g_center\u0026#39; ].join(\u0026#39;,\u0026#39;); return `https://res.cloudinary.com/${cloudName}/image/upload/${params}/v1/${baseId}.jpg`; }; 定数paramsはそれぞれ、使用するフォント・サイズ・太さ、テキストを表示する最大横幅、文字色、枠内に収めるための改行設定、配置の基準位置を設定しています。\nHugo {{- /* Cloudinary */}} {{- $cloudName := \u0026#34;your_cloud_name\u0026#34; -}} {{- $baseId := \u0026#34;ogp_base\u0026#34; -}} {{- $text := .Title -}} {{- if $text -}} {{- $encodeText := urlquery $text -}} {{- $doubleEncodedText := replace $encodeText \u0026#34;%\u0026#34; \u0026#34;%25\u0026#34; -}} {{- $ogUrl := printf \u0026#34;https://res.cloudinary.com/%s/image/upload/l_text:NotoSansJP-Bold.ttf_60_bold:%s,w_850,co_rgb:000000,c_fit,g_center/v1/%s.jpg\u0026#34; $cloudName $doubleEncodedText $baseId -}} \u0026lt;meta property=\u0026#34;og:image\u0026#34; content=\u0026#34;{{ $ogUrl }}\u0026#34;\u0026gt; {{- end -}} 生成されるURLの構造 以下のようなURLが生成されます。\nhttps://res.cloudinary.com/[cloudName]/image/upload/[params]/[version]/[baseId].jpg 項目 意味・役割 cloudName アカウント固有のID、Dashboardで確認できる名前 image/upload リソースタイプとデリバリータイプ、画像を動的に生成・配信することを示す params 最重要項目。カンマ区切りで複数の加工指示を並べる version キャッシュ制御用の数値（例: v1）、画像を更新した際にブラウザへ変更を知らせる役割 baseId 土台となる背景画像のPublic ID この記事で実際に生成されたURLは以下になります。\nhttps://res.cloudinary.com/dl79ugpcw/image/upload/l_text:NotoSansJP-Bold.ttf_60_bold:Cloudinary%25E3%2581%25A7%25E5%258B%2595%25E7%259A%2584%25E3%2581%25AAOGP%25E7%2594%25BB%25E5%2583%258F%25E3%2582%2592%25E7%2594%259F%25E6%2588%2590%25E3%2581%2599%25E3%2582%258B,w_850,co_rgb:000000,c_fit,g_center/v1/ogp_base.jpg 補足 実際ZennでもCloudinaryを使用しているようです。（検証ツールから確認）\n","permalink":"http://localhost:1313/posts/cloudinary-org/","summary":"\u003cp\u003eZennのOGP画像のように画像のテンプレートを用意して、そこに動的にブログ記事のタイトルを挿入する方法を解説します。\n今回はCloudinaryというサービスを使用し、Hugo、Reactでの実装例も紹介します。\u003c/p\u003e","title":"Cloudinaryで動的なOGP画像を生成する"},{"content":"PHPでCSVを出力し、Excelで開くと「000123」といったIDや郵便番号の先頭の0（ゼロ埋め）が消えてしまうことがあります。これはExcelが値を自動的に「数値」と判断して変換するために起こる現象です。\nこの記事では、この問題を回避する2つのアプローチを解説します。\nその1: CSVデータにExcel用の書式を埋め込む方法 CSVをダブルクリックで開いた際に、強制的に文字列として認識させる手法です。\nコード例 値を =\u0026ldquo;値\u0026rdquo; という形式で出力します。\n\u0026lt;?php $file_path = \u0026#39;file.csv\u0026#39;; $handle = fopen($file_path, \u0026#39;w\u0026#39;); $id = \u0026#39;000123\u0026#39;; $csv_row = [ \u0026#39;id\u0026#39; =\u0026gt; \u0026#39;=\u0026#34;\u0026#39; . $id . \u0026#39;\u0026#34;\u0026#39; ]; fputcsv($handle, $csv_row); fclose($handle); ?\u0026gt; この方法のメリット・デメリット メリット\nExcelでそのまま開くだけで「000123」と正しく表示される デメリット\nテキストエディタで開くと =\u0026ldquo;000123\u0026rdquo; と表示される 他のシステムにこのCSVをインポートする場合、=\u0026quot; などの記号がデータとして混入し、エラーの原因になる その2: データを加工せず「Excelのインポート機能」を使う方法 システム連携などを考慮する場合、データ自体を汚さない（加工しない）こちらが本来の推奨策です。\n運用の流れ\nPHPからは純粋なデータ（例: 000123）をそのまま出力する Excelで開く際、ファイルをダブルクリックせず、「データ」タブ ＞ 「テキストまたはCSVから」 を選択する プレビュー画面で該当する列のデータ型を「数値」から**「テキスト」**に変更して取り込む まとめ 以下のように使い分けられます。 配布用CSVの場合 ITに詳しくない一般ユーザーが閲覧するだけなら、「1」のイコールを付与する方法が親切です。\nシステム間連携・バックアップ用の場合 データの整合性が重要な場合は、「2」の加工しない方法を選択し、閲覧側でインポート設定を行うのが正解です。\n用途に合わせて使い分けてみてください。\n","permalink":"http://localhost:1313/posts/php-zero-madding/","summary":"\u003cp\u003ePHPでCSVを出力し、Excelで開くと「000123」といったIDや郵便番号の先頭の0（ゼロ埋め）が消えてしまうことがあります。これはExcelが値を自動的に「数値」と判断して変換するために起こる現象です。\u003c/p\u003e","title":"【PHP】CSV出力で数字の先頭に0を保持させる"},{"content":"更新中です。\n","permalink":"http://localhost:1313/about/","summary":"\u003cp\u003e更新中です。\u003c/p\u003e","title":"About"},{"content":"VBAの配列型は非常に扱いづらいので、代わりにDictionaryオブジェクトを使っています。その際によく使う実装方法をまとめます。\nDictionaryオブジェクトについて VBAで使える連想配列のオブジェクトです。キーと値をセットとして要素の追加、削除、存在チェックなど基本的なメソッドが使えます。\n変数宣言と設定方法 Dictionaryには2種類の設定方法があります。\n1. 実行時バインディング（推奨） 事前の設定が不要で、ファイルを他人に配布する場合にトラブルが少ない方法です。\nDim dictionary As Object: Set dictionary = CreateObject(\u0026#34;Scripting.Dictionary\u0026#34;) 2. 参照設定（Early Binding） VBEのメニューから [ツール] ＞ [参照設定] ＞ [Microsoft Scripting Runtime] にチェックを入れます。入力候補が表示されるようになり、開発効率が上がります。\nDim dictionary As New Scripting.Dictionary 注意点：Mac環境での利用について Scripting.Dictionary はWindows専用のライブラリ（scrrun.dll）を使用しているため、Mac版のExcelでは動作しません。 Mac環境を含むマルチプラットフォームで開発する場合は、VBA標準の Collection オブジェクトや、自作のクラスで代替する必要があります。\n使い方例 要素の追加 Call dictionary.Add(\u0026#34;1\u0026#34;, \u0026#34;value\u0026#34;) dictionary(\u0026#34;2\u0026#34;) = \u0026#34;value2\u0026#34; Debug.Print dictionary(\u0026#34;1\u0026#34;) キーは必須で数値型でも指定できます。(Collection型は文字列のみ)\n要素の存在確認 If dictionary.Exists(\u0026#34;1\u0026#34;) Then Debug.Print \u0026#34;存在します\u0026#34; End If 配列のループ Dim key As Variant For Each key In dictionary Debug.Print key \u0026amp; \u0026#34;:\u0026#34; \u0026amp; dictionary(key) Next 要素の削除 Call dictionary.Remove(\u0026#34;1\u0026#34;) Call dictionary.RemoveAll() 擬似的にプロパティを連想配列に定義 Dim user As Object: Set user = CreateObject(\u0026#34;Scripting.Dictionary\u0026#34;) user(\u0026#34;ID\u0026#34;) = 101 user(\u0026#34;Name\u0026#34;) = \u0026#34;田中\u0026#34; user(\u0026#34;Role\u0026#34;) = \u0026#34;Admin\u0026#34; Dim k As Variant For Each k In user Debug.Print k \u0026amp; \u0026#34;は\u0026#34; \u0026amp; user(k) Next 配列との比較 機能 配列 Dictionary 検索 ループが必要 Existsで一瞬 サイズ変更 ReDimが必要 自動で拡張 要素の削除 困難 Removeで容易 Mac環境 利用可能 利用不可 参考サイト Dictionary オブジェクト ","permalink":"http://localhost:1313/posts/vba-dictionary/","summary":"\u003cp\u003eVBAの配列型は非常に扱いづらいので、代わりにDictionaryオブジェクトを使っています。その際によく使う実装方法をまとめます。\u003c/p\u003e","title":"【VBA】配列の代わりにDictionaryオブジェクトを使う"},{"content":"値が存在する場合のみ、Propsのキーごと子コンポーネントへ渡す記述方法を解説します。\n構文 {...(条件 \u0026amp;\u0026amp; { キー名: 値 })} コード例 関数コンポーネント const Parent = () =\u0026gt; { const user_id = \u0026#34;12345\u0026#34;; return ( \u0026lt;Child {...(user_id \u0026amp;\u0026amp; { user_id })} /\u0026gt; ); }; クラスコンポーネント class Parent extends React.Component { render() { const { user_id } = this.props; return ( \u0026lt;Child {...(user_id \u0026amp;\u0026amp; { user_id })} /\u0026gt; ); } } 仕様 条件が真の場合: { user_id: \u0026ldquo;12345\u0026rdquo; } が展開され、Propsに user_id が含まれます。 条件が偽の場合: false が展開され、Propsに user_id は含まれません（undefined が渡るのではなく、キー自体が存在しない）。\n","permalink":"http://localhost:1313/posts/conditional-props-expansion/","summary":"\u003cp\u003e値が存在する場合のみ、Propsのキーごと子コンポーネントへ渡す記述方法を解説します。\u003c/p\u003e","title":"【React】条件付きProps展開"},{"content":"「Uncaught Error: Cannot use a scalar value as an array in…」の原因と解決法をまとめました。\nエラーが起きる原因 このエラーは、すでに数値（int）や文字列（string）、**ブール値（bool）**などが代入されている変数に対して、[] を使って要素を追加しようとしたときに発生します。\n$data = 10; $data[] = \u0026#34;新しく追加したい要素\u0026#34;; この場合、変数 $data にはすでに10という数値が入っているためエラーを出します。\n基本的な解決策：変数の初期化 もっとも単純な解決策は、配列として使う前に**空の配列で変数を初期化（リセット）**することです。\n$data = 10; $data = []; $data[] = \u0026#34;要素1\u0026#34;; $data[] = \u0026#34;要素2\u0026#34;; var_dump($data); このように $data = []; と一度宣言し直すことで、それまで入っていた数値が破棄され、安全に配列として扱えるようになります。\n実務でよくある発生パターンと対策 実際の開発では、明示的に数値を代入していなくてもこのエラーに遭遇することがあります。\n外部データの取得失敗 APIやデータベースから値を取得した際、正常なら配列が返ってくるはずが、エラーでfalseやエラーコード（数値）が返ってきた場合に発生します。\n対策：型を確認してから操作する if (!is_array($data)) { $data = []; } $data[] = \u0026#34;追加データ\u0026#34;; ループ内での変数名の重複 同じ変数名を使い回していると、意図せず前の処理で入れたスカラー値が残っていることがあります。\n対策：ループの直前で初期化を徹底する $items = [1, 2, 3]; $result = \u0026#34;成功\u0026#34;; $result = []; foreach ($items as $item) { $result[] = $item * 2; } PHPバージョンによる挙動の違い 以前のPHP（7.4以前）では、変数がnullの場合に[]で値を追加すると自動的に配列として扱われましたが、PHP8.0以降では型チェックが厳格化されています。 以前動いていたコードが、サーバーのバージョンを上げたら動かなくなったという場合は、この厳格化が原因である可能性が高いです。常に「配列を使う前は初期化する」という癖をつけておきましょう。\n","permalink":"http://localhost:1313/posts/scalar-to-array/","summary":"\u003cp\u003e「Uncaught Error: Cannot use a scalar value as an array in…」の原因と解決法をまとめました。\u003c/p\u003e","title":"【PHP】「Uncaught Error: Cannot use a scalar value as an array」の原因と解決法"},{"content":"FuelPHPの Model_Crud を使用して、find_by_pk() などのメソッドを実行した際、以下のようなエラーが発生することがあります。\nSQLSTATE[42S22]: Column not found: 1054 Unknown column \u0026#39;id\u0026#39; in \u0026#39;where clause\u0026#39; これは、モデル側で主キーを指定していない場合、FuelPHPがデフォルトの主キー名として id を参照しようとするためです。\n解決策：モデルクラスに主キーを明示する テーブルの主キーがid以外の名称（例：user_idやentry_id）である場合は、モデルの $_primary_keyプロパティを設定することで解決します。\n修正後のコード例 class Model_User extends \\Model_Crud { protected static $_table_name = \u0026#39;user\u0026#39;; protected static $_primary_key = \u0026#39;user_id\u0026#39;; } このように設定することでfind_by_pk()やdelete()を実行した際、正しくWHERE user_id = \u0026hellip;というSQLが生成されるようになります。\n補足：Model_Crudで設定可能な主要パラメーター 主キー以外にも、よく使われる設定値は以下のとおりです。これらを活用することで、開発効率を高めることができます。\nパラメーター名 説明 コード例 $_rules バリデーションルールの設定 'age' =\u0026gt; 'required' $_labels バリデーションエラー時のラベル名 'email' =\u0026gt; 'メールアドレス' $_created_at 作成日時を保存するフィールド名 'user_created_at' $_updated_at 更新日時を保存するフィールド名 'user_updated_at' 注意点：複合主キーについて Model_Crud は複合主キー（複数のカラムを組み合わせた主キー）に対応していません。もし複合主キーのテーブルを扱う必要がある場合は、Model_CrudではなくOrm\\Modelへの移行を検討してください。\nLaravel（Eloquent）でも考え方は同じ LaravelのEloquent ORMにおいても、デフォルトの主キーは id と想定されています。主キー名が異なる場合は、モデル内で以下のように指定が必要です。\nprotected $primaryKey = \u0026#39;user_id\u0026#39;; ","permalink":"http://localhost:1313/posts/fuelphp-find-by-pk-error/","summary":"\u003cp\u003eFuelPHPの Model_Crud を使用して、find_by_pk() などのメソッドを実行した際、以下のようなエラーが発生することがあります。\u003c/p\u003e","title":"【FuelPHP】find_by_pkで「id」カラムエラーが出る原因と解決策"}]